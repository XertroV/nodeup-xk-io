<!DOCTYPE html>
<html lang="en" ng-app="nodeup">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://d2v52k3cl9vedd.cloudfront.net/basscss/7.0.3/basscss.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <title>Sponsor a Node in 10s - nodeup.xk.io</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>
    <script src="/static/qrcode.min.js"></script>
    <script src="/static/app.js"></script>

    <base href="/">
</head>
<body ng-controller="TabController as tabs" class="center">

<div class="content center" id='main' ng-controller="UserAgentController as agent" ng-show="tabs.is('main')">
    <h1 class="red">WARNING: SUPER ALPHA - YOU COULD LOSE MONEY IF YOU SEND IT HERE</h1>
    <h2>Hello, {{ agent.renderName() }}</h2>

    <div id="summary" class="center h3">
        <p>
            <form class="clearfix">
                Launch a
                <select id="clientInput" class="field" ng-change="agent.alertModified('client')" ng-model="agent.client">
                    <option ng-repeat="c in agent.clients track by $index">{{ c }}</option>
                </select>
                node
                <br>
                for
                <button ng-click="agent.monthsDown()" class="btn btn-outline rounded-left">-</button>
                <button disabled="true" class="btn btn-outline border-left not-rounded">{{ agent.months }}</button>
                <button ng-click="agent.monthsUp()" class="btn btn-outline border-left rounded-right">+</button>
                month(s)
                <br>
                for {{ agent.price() | currency:"$" }} USD or {{ agent.price() / agent.exchangeRate | currency:"":8 }} BTC.
            </form>
        </p>
    </div>


    <div id="paymentWrapper" class="center inline-block">
        <a href="{{ agent._paymentURI }}"><div class="paymentImg" id="paymentQR" ng-show="agent._paymentVisible"></div></a>
        <div class="paymentImg" id="paymentSpinner" ng-show="!agent._paymentVisible"></div>
        {{ agent.status }}
    </div>

    <h3 ng-show="agent.msgs.length == 0">Pay to create your node!</h3>
    <div ng-show="agent.msgs.length > 0">
        Be sure to bookmark this URL if you would like to return to this page (or enter your email address below).
        <h3>Messages <button class="btn btn-outline h6" ng-click="agent.nMsgs = 999999; agent._updateMsgs()">Show All</button></h3>
        <hr>
            <ul>
                <li ng-repeat="m in agent.msgs track by $index">{{ m }}</li>
            </ul>
        <hr>
    </div>

    <p>
        When a transaction is detected, a vultr.com node will be created on your behalf and have your chosen version of Bitcoin
        installed. It will then stay online for as much time as has been paid for. You can top-up your node at any time. <br>
        If you'd like to support the running of this service, you can use this <a href="http://www.vultr.com/?ref=6844985">vultr referral link</a>.
        Vultr is a snazzy VPS provider (and they accept Bitcoin!).
    </p>

    <div id="error" class="" ng-show="agent.showError">
        <h4>Error!</h4>
        {{ agent.error }}
    </div>

    <div id="advanced">
        <h2 class="">Advanced</h2>
        <hr>
        All changes are saved automatically. (refresh to check)
        <br><br>
        <form class="center">
            <p>
                If you choose to provide a first name it will be compiled into <code>bitcoind</code> and visible through the version string (e.g. <code>/Bitcoin XT:0.11.0/[NodeUp.xk.io] Gavin's Node</code>). For practical reasons this is limited to 140 characters. If the node has already been compiled you will need to hit the 'recompile' button for this change to work.
                <br><br>
                <label for="nameInput">First Name: (optional)</label><br>
                <input type="text" id="nameInput" ng-model="agent.firstName" class="field inline-block" ng-change="agent.alertModified('name')">
            </p><br>

            <p>
                <label for="tipInput">Tip (%):</label>
                <input id="tipInput" type="number" value="10" max="1000" min="0" step="1" class="field inline-block" ng-model="agent.tip" ng-change="agent.alertModified('tip')">
            </p>

            <p>
                <h4>Email Features Currently Unimplemented</h4>
                If you choose to leave your email here, you will receive an email at important times, such as your when your node comes online, finishes synchronising with the blockchain, or running out of funds.
                <br>
                <label for="emailInput">Email (optional):</label>
                <input id="emailInput" type="text" class="field inline-block" placeholder="email@example.com" ng-model="agent.email" ng-change="agent.alertModified('email')">
                <br>
                <button class="btn btn-outline" ng-click="agent.sendNodeDetails()">Send Node Details in an Email</button>
                <br>
                <label for="emailNotify">Notify of node events:</label>
                <input type="checkbox" id="emailNotify" class="field inline-block" ng-model="agent.emailNotify" ng-change="agent.alertModified('emailNotify')">
            </p>

            <p>
                Testing (not guaranteed to work):
                <button ng-click="agent.recompile()" class="btn btn-outline">Recompile</button>
            </p>

            <p class="h6"><button class="btn btn-outline" ng-click="agent.newIdentity()">(new identity - BOOKMARK THIS ONE FIRST)</button></p>

        </form>
    </div>
</div>

<div id='about' class="content" ng-show="tabs.is('about')">
    <h2>About</h2>
</div>

<div id="footer" class="footer">
    <a ng-click="tabs.set('main')">Main</a> | <a ng-click="tabs.set('about')">About</a> | By <a href="//xk.io" target="_blank">Max Kaye</a>
</div>

</body>
</html>